<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WC Ducomb - Local Admin Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
        }
        .status-online { background-color: #10b981; }
        .status-offline { background-color: #ef4444; }
        .status-warning { background-color: #f59e0b; }
        
        .log-entry {
            font-family: 'Courier New', monospace;
            font-size: 11px;
            line-height: 1.3;
        }
        
        .command-log {
            background: #1a1a1a;
            color: #00ff41;
            max-height: 300px;
            overflow-y: auto;
            border-radius: 8px;
            padding: 12px;
        }
        
        .system-log {
            background: #0f172a;
            color: #e2e8f0;
            max-height: 400px;
            overflow-y: auto;
            border-radius: 8px;
            padding: 12px;
        }
        
        .environment-selector {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .loading-spinner {
            border: 3px solid #f3f3f4;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 8px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="min-h-screen">
        <!-- Header -->
        <header class="environment-selector text-white shadow-lg">
            <div class="container mx-auto px-4 py-4">
                <div class="flex items-center justify-between">
                    <div>
                        <h1 class="text-2xl font-bold">üõ†Ô∏è WC Ducomb Admin Dashboard</h1>
                        <p class="text-blue-100">Local Development & Production Troubleshooting</p>
                    </div>
                    <div class="flex items-center space-x-4">
                        <!-- Environment Selector -->
                        <div class="bg-white bg-opacity-20 rounded-lg p-3">
                            <label class="block text-sm font-medium mb-2">Target Environment:</label>
                            <select id="environment-selector" class="bg-white text-gray-800 px-3 py-2 rounded-lg focus:outline-none">
                                <option value="local">üñ•Ô∏è Local (localhost:5001)</option>
                                <option value="production">üåê Production (wc-ducomb.fly.dev)</option>
                            </select>
                        </div>
                        <div class="text-right">
                            <div class="text-sm text-blue-100">Last Updated</div>
                            <div id="last-updated" class="font-mono">--:--:--</div>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <div class="container mx-auto px-4 py-6">
            <!-- Environment Status Cards -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-600 text-sm">Current Environment</p>
                            <p id="current-env" class="text-xl font-bold text-blue-600">
                                üñ•Ô∏è Local Development
                            </p>
                        </div>
                        <i class="fas fa-server text-3xl text-gray-400"></i>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-md p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-600 text-sm">API Status</p>
                            <p id="api-status" class="text-xl font-bold">
                                <span class="status-indicator status-offline"></span>Checking...
                            </p>
                        </div>
                        <i class="fas fa-plug text-3xl text-gray-400"></i>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-md p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-600 text-sm">IBM i Connection</p>
                            <p id="ibm-connection" class="text-xl font-bold">
                                <span class="status-indicator status-offline"></span>Unknown
                            </p>
                        </div>
                        <i class="fas fa-network-wired text-3xl text-gray-400"></i>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-md p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-600 text-sm">Response Time</p>
                            <p id="response-time" class="text-xl font-bold text-green-600">--ms</p>
                        </div>
                        <i class="fas fa-stopwatch text-3xl text-gray-400"></i>
                    </div>
                </div>
            </div>

            <!-- Main Content Grid -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- SKU Lookup Test -->
                <div class="bg-white rounded-lg shadow-md">
                    <div class="bg-gray-50 px-6 py-4 border-b">
                        <h2 class="text-lg font-semibold flex items-center">
                            <i class="fas fa-search mr-2 text-blue-500"></i>
                            SKU Lookup Test
                        </h2>
                    </div>
                    <div class="p-6">
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Test SKU:</label>
                            <div class="flex space-x-2">
                                <input type="text" id="test-sku" placeholder="e.g., DGE037700" 
                                       class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                       value="DGE037700">
                                <button id="test-lookup" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                                    <i class="fas fa-search mr-1"></i>Test
                                </button>
                            </div>
                        </div>
                        
                        <!-- Quick Test SKUs -->
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Quick Test:</label>
                            <div class="flex flex-wrap gap-2">
                                <button class="quick-sku-btn bg-gray-100 hover:bg-blue-100 px-3 py-1 rounded text-sm" data-sku="DGE037700">DGE037700</button>
                                <button class="quick-sku-btn bg-gray-100 hover:bg-blue-100 px-3 py-1 rounded text-sm" data-sku="DGE037592">DGE037592</button>
                                <button class="quick-sku-btn bg-gray-100 hover:bg-blue-100 px-3 py-1 rounded text-sm" data-sku="LOV224006">LOV224006</button>
                                <button class="quick-sku-btn bg-gray-100 hover:bg-blue-100 px-3 py-1 rounded text-sm" data-sku="BLO150197">BLO150197</button>
                            </div>
                        </div>
                        
                        <div id="test-result" class="bg-gray-50 rounded-lg p-4 min-h-[200px] font-mono text-sm overflow-auto">
                            <p class="text-gray-500">Select a SKU and click Test to see results...</p>
                        </div>
                    </div>
                </div>

                <!-- System Health -->
                <div class="bg-white rounded-lg shadow-md">
                    <div class="bg-gray-50 px-6 py-4 border-b flex items-center justify-between">
                        <h2 class="text-lg font-semibold flex items-center">
                            <i class="fas fa-heartbeat mr-2 text-red-500"></i>
                            System Health
                        </h2>
                        <button id="refresh-health" class="text-gray-500 hover:text-gray-700">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                    </div>
                    <div class="p-6">
                        <div class="space-y-4">
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                <span class="font-medium">API Backend</span>
                                <span id="api-health" class="px-2 py-1 rounded-full text-xs font-medium">
                                    <span class="status-indicator status-offline"></span>Checking...
                                </span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                <span class="font-medium">IBM i Connectivity</span>
                                <span id="ibm-health" class="px-2 py-1 rounded-full text-xs font-medium">
                                    <span class="status-indicator status-offline"></span>Checking...
                                </span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                <span class="font-medium">P5250 Protocol</span>
                                <span id="p5250-health" class="px-2 py-1 rounded-full text-xs font-medium">
                                    <span class="status-indicator status-offline"></span>Checking...
                                </span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                <span class="font-medium">Redis Cache</span>
                                <span id="redis-health" class="px-2 py-1 rounded-full text-xs font-medium">
                                    <span class="status-indicator status-offline"></span>Checking...
                                </span>
                            </div>
                        </div>

                        <!-- System Metrics -->
                        <div class="mt-6 pt-6 border-t">
                            <h3 class="text-md font-semibold mb-3">System Metrics</h3>
                            <div class="grid grid-cols-2 gap-4 text-sm">
                                <div>
                                    <span class="text-gray-600">Uptime:</span>
                                    <span id="system-uptime" class="font-mono ml-2">--</span>
                                </div>
                                <div>
                                    <span class="text-gray-600">Total Requests:</span>
                                    <span id="total-requests" class="font-mono ml-2">--</span>
                                </div>
                                <div>
                                    <span class="text-gray-600">Success Rate:</span>
                                    <span id="success-rate" class="font-mono ml-2">--</span>
                                </div>
                                <div>
                                    <span class="text-gray-600">Avg Response:</span>
                                    <span id="avg-response" class="font-mono ml-2">--</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Command Log -->
                <div class="bg-white rounded-lg shadow-md">
                    <div class="bg-gray-50 px-6 py-4 border-b flex items-center justify-between">
                        <h2 class="text-lg font-semibold flex items-center">
                            <i class="fas fa-terminal mr-2 text-green-500"></i>
                            Command Log
                        </h2>
                        <button id="clear-command-log" class="text-gray-500 hover:text-gray-700">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                    <div class="p-4">
                        <div id="command-log" class="command-log log-entry">
                            <p class="text-green-400">WC Ducomb Admin Console Ready</p>
                            <p class="text-yellow-400">[INFO] Use the controls above to test system functionality</p>
                        </div>
                    </div>
                </div>

                <!-- System Logs (Fly.io Logs) -->
                <div class="bg-white rounded-lg shadow-md">
                    <div class="bg-gray-50 px-6 py-4 border-b flex items-center justify-between">
                        <h2 class="text-lg font-semibold flex items-center">
                            <i class="fas fa-file-alt mr-2 text-purple-500"></i>
                            System Logs (Last 100)
                        </h2>
                        <div class="flex space-x-2">
                            <button id="refresh-logs" class="text-gray-500 hover:text-gray-700">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                            <button id="auto-refresh-toggle" class="text-gray-500 hover:text-gray-700" title="Toggle auto-refresh">
                                <i class="fas fa-play"></i>
                            </button>
                        </div>
                    </div>
                    <div class="p-4">
                        <div class="mb-3 text-sm text-gray-600">
                            <span id="log-status">Click refresh to load latest logs</span>
                            <span id="auto-refresh-status" class="ml-4 text-blue-600"></span>
                        </div>
                        <div id="system-log" class="system-log log-entry">
                            <p class="text-gray-500">System logs will appear here...</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Emergency Controls -->
            <div class="mt-8 bg-red-50 border-l-4 border-red-500 rounded-lg p-6">
                <h3 class="text-lg font-semibold text-red-800 mb-4">üö® Emergency Controls</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <button id="restart-services" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors">
                        <i class="fas fa-redo mr-2"></i>Restart Services
                    </button>
                    <button id="check-network" class="bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors">
                        <i class="fas fa-network-wired mr-2"></i>Network Diagnostic
                    </button>
                    <button id="deploy-status" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                        <i class="fas fa-cloud mr-2"></i>Deployment Status
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        class AdminDashboard {
            constructor() {
                this.currentEnvironment = 'local';
                this.autoRefreshInterval = null;
                this.isAutoRefreshing = false;
                this.init();
            }

            init() {
                this.bindEvents();
                this.updateEnvironment();
                this.loadSystemHealth();
                this.logCommand('Admin Dashboard initialized');
            }

            bindEvents() {
                // Environment selector
                document.getElementById('environment-selector').addEventListener('change', (e) => {
                    this.currentEnvironment = e.target.value;
                    this.updateEnvironment();
                    this.loadSystemHealth();
                    this.logCommand(`Switched to ${e.target.value} environment`);
                });

                // SKU testing
                document.getElementById('test-lookup').addEventListener('click', () => this.testSKULookup());
                document.getElementById('test-sku').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.testSKULookup();
                });

                // Quick SKU buttons
                document.querySelectorAll('.quick-sku-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const sku = e.target.dataset.sku;
                        document.getElementById('test-sku').value = sku;
                        this.testSKULookup();
                    });
                });

                // Refresh buttons
                document.getElementById('refresh-health').addEventListener('click', () => this.loadSystemHealth());
                document.getElementById('refresh-logs').addEventListener('click', () => this.loadSystemLogs());
                document.getElementById('clear-command-log').addEventListener('click', () => this.clearCommandLog());

                // Auto-refresh toggle
                document.getElementById('auto-refresh-toggle').addEventListener('click', () => this.toggleAutoRefresh());

                // Emergency controls
                document.getElementById('restart-services').addEventListener('click', () => this.restartServices());
                document.getElementById('check-network').addEventListener('click', () => this.checkNetwork());
                document.getElementById('deploy-status').addEventListener('click', () => this.checkDeploymentStatus());
            }

            updateEnvironment() {
                const envDisplay = document.getElementById('current-env');
                if (this.currentEnvironment === 'local') {
                    envDisplay.innerHTML = 'üñ•Ô∏è Local Development';
                    envDisplay.className = 'text-xl font-bold text-blue-600';
                } else {
                    envDisplay.innerHTML = 'üåê Production (Fly.io)';
                    envDisplay.className = 'text-xl font-bold text-green-600';
                }
            }

            getApiBase() {
                return this.currentEnvironment === 'local' 
                    ? 'http://localhost:5001/api/inventory'
                    : 'https://wc-ducomb.fly.dev/api/inventory';
            }

            async loadSystemHealth() {
                this.logCommand(`Loading system health for ${this.currentEnvironment} environment`);
                
                try {
                    const startTime = performance.now();
                    const response = await fetch(`${this.getApiBase()}/status`);
                    const endTime = performance.now();
                    const responseTime = Math.round(endTime - startTime);
                    
                    const data = await response.json();
                    
                    // Update status indicators
                    this.updateStatusIndicator('api-status', 'Online', true);
                    this.updateStatusIndicator('api-health', 'Online', true);
                    this.updateStatusIndicator('ibm-connection', data.connected ? 'Connected' : 'Offline', data.connected);
                    this.updateStatusIndicator('ibm-health', data.connected ? 'Connected' : 'Offline', data.connected);
                    this.updateStatusIndicator('p5250-health', data.available ? 'Available' : 'Unavailable', data.available);
                    this.updateStatusIndicator('redis-health', data.redis_available ? 'Connected' : 'Unavailable', data.redis_available);
                    
                    // Update metrics
                    document.getElementById('response-time').textContent = `${responseTime}ms`;
                    document.getElementById('system-uptime').textContent = data.uptime || '--';
                    document.getElementById('total-requests').textContent = data.stats?.total_lookups || '0';
                    document.getElementById('success-rate').textContent = data.stats?.successful_lookups 
                        ? `${Math.round((data.stats.successful_lookups / data.stats.total_lookups) * 100)}%` 
                        : '--';
                    document.getElementById('avg-response').textContent = data.stats?.avg_response_time 
                        ? `${Math.round(data.stats.avg_response_time * 1000)}ms` 
                        : '--';
                    
                    this.logCommand(`‚úÖ Health check completed (${responseTime}ms) - IBM i: ${data.connected ? 'Connected' : 'Offline'}`);
                    
                } catch (error) {
                    this.updateStatusIndicator('api-status', 'Offline', false);
                    this.updateStatusIndicator('api-health', 'Offline', false);
                    this.updateStatusIndicator('ibm-connection', 'Error', false);
                    this.updateStatusIndicator('ibm-health', 'Error', false);
                    this.updateStatusIndicator('p5250-health', 'Error', false);
                    this.updateStatusIndicator('redis-health', 'Error', false);
                    
                    document.getElementById('response-time').textContent = 'Error';
                    
                    this.logCommand(`‚ùå Health check failed: ${error.message}`);
                }
                
                document.getElementById('last-updated').textContent = new Date().toLocaleTimeString();
            }

            async testSKULookup() {
                const sku = document.getElementById('test-sku').value.trim();
                if (!sku) {
                    this.logCommand('‚ùå No SKU provided for lookup test');
                    return;
                }

                const resultDiv = document.getElementById('test-result');
                resultDiv.innerHTML = '<div class="loading-spinner"></div>Testing SKU lookup...';
                
                this.logCommand(`üîç Testing SKU lookup: ${sku}`);

                try {
                    const startTime = performance.now();
                    const response = await fetch(`${this.getApiBase()}/lookup`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ sku: sku })
                    });

                    const endTime = performance.now();
                    const responseTime = ((endTime - startTime) / 1000).toFixed(2);
                    const data = await response.json();

                    if (data.found) {
                        resultDiv.innerHTML = `
                            <div class="text-green-600 font-bold mb-3">‚úÖ SUCCESS (${responseTime}s)</div>
                            <div class="space-y-2 text-sm">
                                <div><strong>SKU:</strong> ${data.sku}</div>
                                <div><strong>Description:</strong> ${data.description || 'N/A'}</div>
                                <div><strong>On Hand:</strong> ${data.on_hand || 0} ${data.unit_of_measure || 'EA'}</div>
                                <div><strong>Available:</strong> ${data.net_available || 0}</div>
                                <div><strong>Allocated:</strong> ${data.allocated || 0}</div>
                                <div><strong>On P/O:</strong> ${data.on_purchase_order || 0}</div>
                                <div><strong>On B/O:</strong> ${data.on_back_order || 0}</div>
                                <div class="text-xs text-gray-500 mt-3">Retrieved: ${data.timestamp}</div>
                                ${data.raw_screen ? '<div class="mt-3"><strong>Raw Screen:</strong><pre class="text-xs bg-gray-800 text-green-400 p-2 rounded mt-1 overflow-auto max-h-32">' + data.raw_screen.substring(0, 500) + '...</pre></div>' : ''}
                            </div>
                        `;
                        this.logCommand(`‚úÖ SKU ${sku} found: ${data.description} (${data.on_hand} available)`);
                    } else {
                        resultDiv.innerHTML = `
                            <div class="text-yellow-600 font-bold mb-3">‚ö†Ô∏è NOT FOUND (${responseTime}s)</div>
                            <p class="text-sm">SKU ${sku} was not found in the inventory system.</p>
                            ${data.error ? `<p class="text-red-500 mt-2 text-sm">Error: ${data.error}</p>` : ''}
                            ${data.raw_screen ? '<div class="mt-3"><strong>Raw Screen:</strong><pre class="text-xs bg-gray-800 text-green-400 p-2 rounded mt-1 overflow-auto max-h-32">' + data.raw_screen.substring(0, 500) + '...</pre></div>' : ''}
                        `;
                        this.logCommand(`‚ö†Ô∏è SKU ${sku} not found (${responseTime}s)`);
                    }

                } catch (error) {
                    resultDiv.innerHTML = `
                        <div class="text-red-600 font-bold mb-3">‚ùå ERROR</div>
                        <p class="text-sm">Failed to lookup SKU: ${error.message}</p>
                    `;
                    this.logCommand(`‚ùå SKU lookup failed: ${error.message}`);
                }
            }

            async loadSystemLogs() {
                if (this.currentEnvironment !== 'production') {
                    this.logCommand('üìã System logs only available for production environment');
                    document.getElementById('system-log').innerHTML = '<p class="text-yellow-400">System logs are only available for production environment</p>';
                    return;
                }

                const logDiv = document.getElementById('system-log');
                const statusDiv = document.getElementById('log-status');
                
                statusDiv.textContent = 'Loading logs...';
                this.logCommand('üìã Loading system logs from Fly.io');

                try {
                    // For production, we'd need to implement a proxy endpoint to fetch Fly logs
                    // For now, show a placeholder
                    logDiv.innerHTML = `
                        <p class="text-blue-400">[INFO] System log integration would require:</p>
                        <p class="text-green-400">1. Fly.io API proxy endpoint</p>
                        <p class="text-green-400">2. Authentication token management</p>
                        <p class="text-green-400">3. Log streaming WebSocket connection</p>
                        <p class="text-yellow-400">[PLACEHOLDER] Recent logs would appear here...</p>
                    `;
                    
                    statusDiv.textContent = `Logs updated at ${new Date().toLocaleTimeString()}`;
                    this.logCommand('üìã System log placeholder loaded (implementation needed)');
                    
                } catch (error) {
                    logDiv.innerHTML = `<p class="text-red-400">Error loading logs: ${error.message}</p>`;
                    statusDiv.textContent = 'Error loading logs';
                    this.logCommand(`‚ùå Failed to load system logs: ${error.message}`);
                }
            }

            toggleAutoRefresh() {
                const button = document.getElementById('auto-refresh-toggle');
                const status = document.getElementById('auto-refresh-status');
                
                if (this.isAutoRefreshing) {
                    clearInterval(this.autoRefreshInterval);
                    this.isAutoRefreshing = false;
                    button.innerHTML = '<i class="fas fa-play"></i>';
                    status.textContent = '';
                    this.logCommand('‚è∏Ô∏è Auto-refresh disabled');
                } else {
                    this.autoRefreshInterval = setInterval(() => {
                        this.loadSystemHealth();
                        if (this.currentEnvironment === 'production') {
                            this.loadSystemLogs();
                        }
                    }, 10000); // Refresh every 10 seconds
                    
                    this.isAutoRefreshing = true;
                    button.innerHTML = '<i class="fas fa-pause"></i>';
                    status.textContent = 'Auto-refresh: 10s';
                    this.logCommand('‚ñ∂Ô∏è Auto-refresh enabled (10s interval)');
                }
            }

            updateStatusIndicator(elementId, text, isOnline) {
                const element = document.getElementById(elementId);
                const statusClass = isOnline ? 'status-online' : 'status-offline';
                element.innerHTML = `<span class="status-indicator ${statusClass}"></span>${text}`;
            }

            logCommand(message) {
                const logDiv = document.getElementById('command-log');
                const timestamp = new Date().toLocaleTimeString();
                const logEntry = document.createElement('p');
                logEntry.innerHTML = `<span class="text-blue-400">[${timestamp}]</span> ${message}`;
                logDiv.appendChild(logEntry);
                logDiv.scrollTop = logDiv.scrollHeight;
            }

            clearCommandLog() {
                document.getElementById('command-log').innerHTML = '<p class="text-green-400">Command log cleared</p>';
                this.logCommand('üóëÔ∏è Command log cleared');
            }

            async restartServices() {
                this.logCommand('üîÑ Restart services requested (not implemented)');
                alert('Service restart functionality would require additional backend endpoints');
            }

            async checkNetwork() {
                this.logCommand('üåê Running network diagnostic...');
                
                // Test network connectivity to both environments
                const tests = [
                    { name: 'Local API', url: 'http://localhost:5001/api/inventory/status' },
                    { name: 'Production API', url: 'https://wc-ducomb.fly.dev/api/inventory/status' }
                ];

                for (const test of tests) {
                    try {
                        const startTime = performance.now();
                        const response = await fetch(test.url);
                        const endTime = performance.now();
                        const responseTime = Math.round(endTime - startTime);
                        
                        if (response.ok) {
                            this.logCommand(`‚úÖ ${test.name}: OK (${responseTime}ms)`);
                        } else {
                            this.logCommand(`‚ö†Ô∏è ${test.name}: HTTP ${response.status} (${responseTime}ms)`);
                        }
                    } catch (error) {
                        this.logCommand(`‚ùå ${test.name}: ${error.message}`);
                    }
                }
            }

            async checkDeploymentStatus() {
                this.logCommand('‚òÅÔ∏è Checking deployment status...');
                this.logCommand('üìã Deployment status check would require Fly.io API integration');
                alert('Deployment status check would require Fly.io API integration');
            }
        }

        // Initialize dashboard when page loads
        document.addEventListener('DOMContentLoaded', () => {
            window.adminDashboard = new AdminDashboard();
        });
    </script>
</body>
</html>